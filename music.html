<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ken Kobayashi - Music Portfolio</title>
    <!-- Load Tailwind CSS from CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load custom fonts from Google Fonts API -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@100;200;300;400;500;600;700;800;900&family=Edu+TAS+Beginner:wght@600;900&display=swap" rel="stylesheet">
    <style>
        /* Define custom base styles for consistency */
        body {
            font-family: 'Prompt', sans-serif;
            background-color: #0f000f;
            color: #ffffff;
        }

        /* Custom style for the logo: Edu TAS Beginner font and italic style */
        .logoName {
            font-family: 'Edu TAS Beginner', cursive;
            font-style: italic;
        }

        /* Ensure iframes scale responsively within their containers */
        .responsive-iframe-container {
            /* 16:9 aspect ratio padding-bottom is (9/16) * 100% = 56.25% */
            padding-bottom: 56.25%;
            position: relative;
            height: 0;
            overflow: hidden;
            margin-top: 1rem;
        }

        .responsive-iframe-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Custom sizing for the SoundCloud embed, as it has a fixed height */
        .soundcloud-embed {
            margin-top: 1rem;
        }
    </style>
</head>

<body>
    <div class="header min-h-screen flex flex-col">
        <div class="container mx-auto px-4 w-full">

            <!-- Placeholder for the dynamic Navbar -->
            <div id="navbar-placeholder"></div>

            <!-- Main Music Content -->
            <main class="py-4">
                <h1 class="text-5xl font-extrabold text-center mb-12 border-b-2 border-purple-500 pb-4">Music Production Portfolio</h1>
                
                <!-- Grid Container for Music Tracks -->
                <!-- Grid: 1 column on mobile, 2 columns on medium screens, 2 columns on large screens -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    
                    <!-- Track 1: Ruin (Audio) - FEATURED TRACK -->
                    <div class="lg:col-span-3 md:col-span-2 bg-gray-800 p-8 rounded-xl shadow-2xl transition-all duration-300 border-4 border-purple-500 hover:shadow-purple-700/50 hover:scale-[1.01]">
                        <h2 class="text-4xl font-extrabold text-white mb-1">Ruin</h2>
                        <h3 class="text-xl font-light italic text-purple-300 mb-4">ken</h3>
                        
                        <!-- Text container with generic classes. Only applies truncation on small screens. -->
                        <div class="collapsible-description relative overflow-hidden max-h-12 lg:max-h-full text-base font-normal text-gray-300 mb-4">
                            <p>A track using sounds from the Csound Catalog, a CD-ROM made by Dr. Boulanger in 2000 containing pieces of audio made in the Csound language. These audio files were sampled, and simple tape effects were applied for the piece. This track was made for a class competition for Dr. Boulanger's electroacoustic composition class in my time at Berklee.</p>
                            <!-- Gradient fade with generic class - hidden on large screens -->
                            <div class="fade-overlay absolute bottom-0 left-0 w-full h-6 bg-gradient-to-t from-gray-800 to-transparent lg:hidden"></div>
                        </div>
                        
                        <!-- Read More Button with generic class. Only visible on small screens. -->
                        <button class="read-more-btn text-purple-400 text-sm font-semibold hover:text-purple-300 lg:hidden">
                            Read More &darr;
                        </button>
                        
                        <!-- AUDIO PLAYER for WAV file -->
                        <div class="mt-4">
                            <audio controls class="w-full rounded-lg bg-gray-700 p-2">
                                <source src="./assets/audio/ruin.wav" type="audio/wav">
                                Your browser does not support the audio element.
                            </audio>
                        </div>
                        <!-- End AUDIO PLAYER -->
                    </div>

                    <!-- Track: Mess I've Left Behind (Audio) -->
                    <div class="bg-gray-900/50 p-6 rounded-xl shadow-xl transition-transform duration-300 hover:shadow-purple-700/50 hover:scale-[1.02]">
                        <h2 class="text-3xl font-bold text-white mb-1">Mess I've Left Behind</h2>
                        <h3 class="text-xl font-light italic text-purple-300 mb-4">ken ft. Kafu</h3>
                        <div class="collapsible-description relative text-sm font-light text-gray-400 mb-4"><p>An trap inspired electronic pop song using singing synthesizer, KAFU.</p></div>
                        
                        <!-- AUDIO PLAYER for WAV file -->
                        <div class="mt-4">
                            <audio controls class="w-full rounded-lg bg-gray-700 p-2">
                                <source src="./assets/audio/messLeftBehind.wav" type="audio/wav">
                                Your browser does not support the audio element.
                            </audio>
                        </div>
                        <!-- End AUDIO PLAYER -->
                    </div>

                    <!-- Track 3: Taste of Candy (YouTube) -->
                    <div class="bg-gray-900/50 p-6 rounded-xl shadow-xl transition-transform duration-300 hover:shadow-purple-700/50 hover:scale-[1.02]">
                        <h2 class="text-3xl font-bold text-white mb-1">Taste of Candy</h2>
                        <h3 class="text-xl font-light italic text-purple-300 mb-4">ken ft. Hatsune Miku</h3>
                        <div class="collapsible-description relative text-sm font-light text-gray-400 mb-4"><p>A farewell lovesong, my attempt at a bittersweet ballad.</p></div>
                        <div class="responsive-iframe-container">
                            <iframe src="https://www.youtube.com/embed/PO_y94pqrHY" frameborder="0" allow="clipboard-write; picture-in-picture" allowfullscreen></iframe>
                        </div>
                    </div>
                    
                    <!-- Track 1: Forget Me (YouTube) -->
                    <div class="bg-gray-900/50 p-6 rounded-xl shadow-xl transition-transform duration-300 hover:shadow-purple-700/50 hover:scale-[1.02]">
                        <h2 class="text-3xl font-bold text-white mb-1">Forget Me</h2>
                        <h3 class="text-xl font-light italic text-purple-300 mb-4">ken ft. Hatsune Miku</h3>
                         <div class="collapsible-description relative text-sm font-light text-gray-400 mb-4"><p>My first track, featuring the vocaloid singer, Hatsune Miku.</p></div>
                        <div class="responsive-iframe-container">
                            <iframe src="https://www.youtube.com/embed/jtR-VZRXP48" frameborder="0" allow="clipboard-write; picture-in-picture" allowfullscreen></iframe>
                        </div>
                    </div>

                    <!-- Track 2: Out of Love (YouTube) -->
                    <div class="bg-gray-900/50 p-6 rounded-xl shadow-xl transition-transform duration-300 hover:shadow-purple-700/50 hover:scale-[1.02]">
                        <h2 class="text-3xl font-bold text-white mb-1">Out of Love</h2>
                        <h3 class="text-xl font-light italic text-purple-300 mb-4">ken ft. Hatsune Miku</h3>
                        <div class="collapsible-description relative text-sm font-light text-gray-400 mb-4"><p>A revisit to Miku, learning the depths and details of vocaloid synthesis.</p></div>
                        <div class="responsive-iframe-container">
                            <iframe src="https://www.youtube.com/embed/XRA3QPuZ6zw" frameborder="0" allow="clipboard-write; picture-in-picture" allowfullscreen></iframe>
                        </div>
                    </div>


                    <!-- Track 4: LOONA - Flip That (SoundCloud) -->
                    <div class="bg-gray-900/50 p-6 rounded-xl shadow-xl transition-transform duration-300 hover:shadow-purple-700/50 hover:scale-[1.02] w-full">
                        <h2 class="text-3xl font-bold text-white mb-1">LOONA - Flip That</h2>
                        <h3 class="text-xl font-light italic text-purple-300 mb-4">(ken Remix)</h3>
                        <div class="collapsible-description relative text-sm font-light text-gray-400 mb-4"><p>A house/future bass remix of a K-pop song.</p></div>
                        
                        <div class="soundcloud-embed w-full"> 
                            <iframe 
                                id="sc-widget"
                                width="100%" 
                                height="166" 
                                scrolling="no" 
                                frameborder="no" 
                                allow="autoplay" 
                                src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/1316754085&color=%23b291ff&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true">    
                            </iframe>
                            <div class="text-xs text-gray-500 mt-2">
                                <a href="https://soundcloud.com/user-916661343-886891682" title="ken" target="_blank" class="text-gray-500 hover:text-purple-400 transition-colors">ken</a> · <a href="https://soundcloud.com/user-916661343-886891682/flip-that-ken-remix-loona" title="Flip That (Ken Remix) - Loona" target="_blank" class="text-gray-500 hover:text-purple-400 transition-colors">Flip That (Ken Remix) - Loona</a>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

        </div>
    </div>

    <!-- JavaScript to load the navbar and implement generic Read More functionality -->
    <script>
        // Function to load the navbar content
        async function loadNavbar() {
            try {
                // IMPORTANT: Ensure this path is correct based on your file setup
                const response = await fetch('nav.html'); 
                const html = await response.text();
                document.getElementById('navbar-placeholder').innerHTML = html;
            } catch (error) {
                console.error('Failed to load navbar:', error);
            }
        }
        
        // Generic function to toggle the Read More/Read Less state for any description
        function toggleReadMore(button) {
            // Find the description container (it's the previous sibling of the button)
            const container = button.previousElementSibling;
            // Find the fade overlay inside the container
            const fadeOverlay = container.querySelector('.fade-overlay');

            if (container.classList.contains('max-h-24')) {
                // Expand
                container.classList.remove('max-h-24', 'overflow-hidden');
                fadeOverlay.classList.add('hidden');
                button.innerHTML = 'Read Less &uarr;';
            } else {
                // Collapse
                container.classList.add('max-h-24', 'overflow-hidden');
                fadeOverlay.classList.remove('hidden');
                button.innerHTML = 'Read More &darr;';
            }
        }

        // Function to initialize the Read More buttons
        function initReadMoreButtons() {
            // Select all buttons with the generic class
            const buttons = document.querySelectorAll('.read-more-btn');
            
            buttons.forEach(button => {
                // Attach the toggle function to the button
                button.addEventListener('click', () => {
                    toggleReadMore(button);
                });
            });
        }
        
        // Event listeners
        document.addEventListener('DOMContentLoaded', () => {
            loadNavbar();
            initReadMoreButtons(); 
        });
    </script>
</body>
</html>
